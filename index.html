<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCEND Club Schedule</title>
    <style>
        body {
            background-color: #F1C40F; /* Club's yellow */
            color: black;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 columns */
            gap: 20px; /* Spacing between columns */
        }

        .header {
            grid-column: span 3; /* Header spans all 3 columns */
            text-align: center;
            margin-bottom: 30px;
        }

        .sport-container {
            background-color: black;
            color: #F1C40F;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .sport-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .schedule-item {
            background-color: #F1C40F;
            color: black;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }

        .schedule-item p {
            margin: 0;
        }

        .schedule-item .location {
            font-style: italic;
        }

        /* Responsive design */
        @media (max-width: 800px) {
            .container {
                grid-template-columns: repeat(2, 1fr); /* Switch to 2 columns on smaller screens */
            }
        }

        @media (max-width: 500px) {
            .container {
                grid-template-columns: 1fr; /* Switch to 1 column on mobile */
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ASCEND Club Schedule</h1>
    </div>
    <div id="schedule"></div>
</div>

<script>
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT5U-kYeEl5v6E7sKY2lwFprx9hkxmmWnuOvqkAWpqpyqaVwXAiblbw9Vz_pYewKuH95k10O_yA1hkH/pub?gid=0&single=true&output=csv';

    function fetchAndRenderSchedule() {
        fetch(CSV_URL)
            .then(response => response.text())
            .then(csv => {
                const rows = csv.split('\n');
                const scheduleData = processCSVData(rows);
                renderSchedule(scheduleData);
            })
            .catch(error => console.error('Error fetching CSV:', error));
    }

    function processCSVData(rows) {
        const scheduleData = [];

        rows.slice(1).forEach(row => {  // Start from row 1 to skip headers
            const cells = row.split(',');

            // Handle Schedule 1
            if (cells[0] && cells[1] && cells[2] && cells[3]) {
                addSchedule(scheduleData, cells[0], cells[1], cells[2], cells[3]);
            }
            // Handle Schedule 2
            if (cells[0] && cells[4] && cells[5] && cells[6]) {
                addSchedule(scheduleData, cells[0], cells[4], cells[5], cells[6]);
            }
            // Handle Schedule 3
            if (cells[0] && cells[7] && cells[8] && cells[9]) {
                addSchedule(scheduleData, cells[0], cells[7], cells[8], cells[9]);
            }
        });

        return scheduleData;
    }

    function addSchedule(scheduleData, sport, day, time, location) {
        const schedule = {
            day: day,
            time: time,
            location: location
        };

        const sportIndex = scheduleData.findIndex(data => data.sport === sport);
        if (sportIndex !== -1) {
            scheduleData[sportIndex].schedules.push(schedule);
        } else {
            scheduleData.push({
                sport: sport,
                schedules: [schedule]
            });
        }
    }

    function renderSchedule(scheduleData) {
        const container = document.getElementById('schedule');
        scheduleData.forEach(sportData => {
            const sportContainer = document.createElement('div');
            sportContainer.classList.add('sport-container');

            const sportTitle = document.createElement('h2');
            sportTitle.classList.add('sport-title');
            sportTitle.innerText = sportData.sport;
            sportContainer.appendChild(sportTitle);

            sportData.schedules.forEach(schedule => {
                const scheduleItem = document.createElement('div');
                scheduleItem.classList.add('schedule-item');

                const day = document.createElement('p');
                day.innerText = schedule.day;
                scheduleItem.appendChild(day);

                const time = document.createElement('p');
                time.innerText = schedule.time;
                scheduleItem.appendChild(time);

                const location = document.createElement('p');
                location.classList.add('location');
                location.innerText = schedule.location;
                scheduleItem.appendChild(location);

                sportContainer.appendChild(scheduleItem);
            });

            container.appendChild(sportContainer);
        });
    }

    document.addEventListener('DOMContentLoaded', fetchAndRenderSchedule);
</script>

</body>
</html>
