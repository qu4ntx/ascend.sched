<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCEND Club Schedule</title>
    <style>
        body {
            background-color: #fafafa; /* light background */
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 95%;
            max-width: 1200px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
            margin-top: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: #333;
        }

        /* Grid layout */
        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr); /* 7 columns for the days of the week */
            gap: 10px;
        }

        .day-container {
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
        }

        .day-title {
            font-size: 16px;
            font-weight: bold;
            color: #4a4a4a;
            margin-bottom: 10px;
            text-align: left;
            border-bottom: 2px solid #ccc;
            width: 100%;
        }

        .schedule-item {
            background-color: #f5f5f5;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-size: 14px;
            color: #333;
            display: flex;
            justify-content: space-between; /* Aligns content inside each item properly */
            align-items: center;
            border-left: 4px solid #FFCC00; /* Accent color applied only to the left */
        }

        .schedule-item p {
            margin: 0;
        }

        .schedule-item .location {
            font-style: italic;
            color: #666;
        }

        /* Ensure sport name, time, and location align well */
        .schedule-item .time,
        .schedule-item .location,
        .schedule-item .sport-name {
            color: #333; /* Black or appropriate variation */
            display: inline-block; /* Ensures they stay in line */
        }

        .time-location-wrapper {
            display: flex;
            flex-direction: column;
        }

        .sport-wrapper {
            display: flex;
            align-items: center;
        }

        /* Adjust time font spacing and fix PM/AM placement */
        .time-wrapper {
            margin-left: 5px;
        }

        .time-wrapper .time {
            font-size: 14px;
        }

        .accent-block {
            background-color: #FFCC00;
            width: 4px;
            height: 100%;
            margin-right: 10px;
            border-radius: 3px 0 0 3px; /* Rounded left side */
        }

        @media (max-width: 800px) {
            .schedule-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 columns on medium screens */
            }
        }

        @media (max-width: 500px) {
            .schedule-grid {
                grid-template-columns: 1fr; /* 1 column on small screens */
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ASCEND Club Schedule</h1>
    </div>
    <div class="schedule-grid" id="schedule">
        <!-- Schedule will be populated here -->
    </div>
</div>

<script>
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT5U-kYeEl5v6E7sKY2lwFprx9hkxmmWnuOvqkAWpqpyqaVwXAiblbw9Vz_pYewKuH95k10O_yA1hkH/pub?gid=0&single=true&output=csv';

    function fetchAndRenderSchedule() {
        fetch(CSV_URL)
            .then(response => response.text())
            .then(csv => {
                const rows = csv.split('\n');
                const scheduleData = processCSVData(rows);
                renderSchedule(scheduleData);
            })
            .catch(error => console.error('Error fetching CSV:', error));
    }

    function processCSVData(rows) {
        const scheduleData = [];

        rows.slice(1).forEach(row => {
            const cells = row.split(',');

            if (cells[0] && cells[1] && cells[2] && cells[3]) {
                addSchedule(scheduleData, cells[1], cells[2], cells[3], cells[0]);
            }
            if (cells[4] && cells[5] && cells[6]) {
                addSchedule(scheduleData, cells[4], cells[5], cells[6], cells[0]);
            }
        });

        return scheduleData;
    }

    function addSchedule(scheduleData, day, time, location, sportName) {
        const schedule = {
            day: day,
            time: time,
            location: location,
            sportName: sportName
        };
        scheduleData.push(schedule);
    }

    function renderSchedule(scheduleData) {
        const container = document.getElementById('schedule');
        const daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        
        daysOfWeek.forEach(day => {
            const dayContainer = document.createElement('div');
            dayContainer.classList.add('day-container');

            const dayTitle = document.createElement('div');
            dayTitle.classList.add('day-title');
            dayTitle.innerText = day;
            dayContainer.appendChild(dayTitle);

            // Filter schedules for the current day
            let daySchedules = scheduleData.filter(schedule => schedule.day === day);

            // Sort schedules by time (convert times to 24-hour format)
            daySchedules.sort((a, b) => convertTo24Hour(a.time) - convertTo24Hour(b.time));

            daySchedules.forEach(schedule => {
                const scheduleItem = document.createElement('div');
                scheduleItem.classList.add('schedule-item');

                // Display accent color block
                const accentBlock = document.createElement('div');
                accentBlock.classList.add('accent-block');
                scheduleItem.appendChild(accentBlock);

                // Wrapper for sport name and time
                const sportWrapper = document.createElement('div');
                sportWrapper.classList.add('sport-wrapper');

                // Display sport name
                const sportName = document.createElement('p');
                sportName.classList.add('sport-name');
                sportName.innerText = schedule.sportName;
                sportWrapper.appendChild(sportName);

                // Time and location wrapper
                const timeLocationWrapper = document.createElement('div');
                timeLocationWrapper.classList.add('time-location-wrapper');

                // Display time
                const time = document.createElement('p');
                time.classList.add('time');
                time.innerText = schedule.time;
                timeLocationWrapper.appendChild(time);

                // Display location
                const location = document.createElement('p');
                location.classList.add('location');
                location.innerText = schedule.location;
                timeLocationWrapper.appendChild(location);

                scheduleItem.appendChild(sportWrapper);
                scheduleItem.appendChild(timeLocationWrapper);
                dayContainer.appendChild(scheduleItem);
            });

            container.appendChild(dayContainer);
        });
    }

    // Helper function to convert 12-hour time format to 24-hour format (as a number for sorting)
    function convertTo24Hour(time) {
        const [hours, minutes] = time.split(/[: ]/);  // Split time string into components (hours, minutes)
        let period = time.slice(-2).toUpperCase();    // Extract AM/PM

        let hourNum = parseInt(hours);
        if (period === 'PM' && hourNum < 12) {
            hourNum += 12;
        }
        if (period === 'AM' && hourNum === 12) {
            hourNum = 0;
        }
        return hourNum * 60 + parseInt(minutes);  // Return the total minutes since midnight
    }

    document.addEventListener('DOMContentLoaded', fetchAndRenderSchedule);
</script>

</body>
</html>
